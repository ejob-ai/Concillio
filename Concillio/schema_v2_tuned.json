{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "roles": {
    "STRATEGIST": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "time_horizon_months": { "type": "integer", "minimum": 12, "maximum": 60 },
        "assumptions": { "type": "array", "items": { "type": "string" } },
        "analysis": { "type": "string" },
        "options": {
          "type": "array",
          "minItems": 2,
          "maxItems": 4,
          "items": {
            "type": "object",
            "additionalProperties": true,
            "properties": {
              "name": { "type": "string", "minLength": 1 },
              "pros": { "type": "array", "items": { "type": "string" } },
              "cons": { "type": "array", "items": { "type": "string" } },
              "enablers": { "type": "array", "items": { "type": "string" } },
              "blockers": { "type": "array", "items": { "type": "string" } },
              "risks": { "type": "array", "items": { "type": "string" } },
              "effort": { "type": "string", "enum": ["low","medium","high"] },
              "payoff": { "type": "string", "enum": ["low","medium","high"] },
              "confidence": { "type": "number", "minimum": 0, "maximum": 1 }
            },
            "required": ["name"]
          }
        },
        "recommendations": { "type": "array", "minItems": 3, "maxItems": 5, "items": { "type": "string" } }
      }
    },

    "FUTURIST": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "signals": { "type": "array", "items": { "type": "string" } },
        "scenarios": {
          "type": "array",
          "minItems": 2,
          "maxItems": 3,
          "items": {
            "type": "object",
            "additionalProperties": true,
            "properties": {
              "name": { "type": "string", "minLength": 1 },
              "probability": { "type": "number", "minimum": 0, "maximum": 1 },
              "impact": { "type": "string", "enum": ["low","medium","high"] },
              "narrative": { "type": "string" },
              "implications": { "type": "array", "minItems": 3, "maxItems": 5, "items": { "type": "string" } }
            },
            "required": ["name","probability","impact"]
          }
        },
        "watchlist": { "type": "array", "items": { "type": "string" } }
      }
    },

    "ADVISOR": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "bullets_by_role": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "STRATEGIST": { "type": "array", "minItems": 3, "maxItems": 5, "uniqueItems": true, "items": { "type": "string", "minLength": 8, "maxLength": 160 } },
            "FUTURIST":   { "type": "array", "minItems": 3, "maxItems": 5, "uniqueItems": true, "items": { "type": "string", "minLength": 8, "maxLength": 160 } },
            "PSYCHOLOGIST":{ "type": "array", "minItems": 3, "maxItems": 5, "uniqueItems": true, "items": { "type": "string", "minLength": 8, "maxLength": 160 } }
          },
          "required": ["STRATEGIST","FUTURIST","PSYCHOLOGIST"]
        }
      },
      "required": ["bullets_by_role"]
    },

    "SUMMARIZER": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "decision",
        "consensus_bullets",
        "rationale_bullets",
        "review_horizon_days",
        "confidence"
      ],
      "properties": {
        "decision": { "type": "string", "minLength": 1 },
        "summary": { "type": "string", "maxLength": 600, "minLength": 60 },
        "consensus_bullets": {
          "type": "array",
          "minItems": 5,
          "maxItems": 8,
          "uniqueItems": true,
          "items": { "type": "string", "minLength": 8, "maxLength": 180 }
        },
        "rationale_bullets": {
          "type": "array",
          "items": { "type": "string", "maxLength": 220 }
        },
        "disagreements": { "type": "array", "items": { "type": "string", "maxLength": 220 } },
        "top_risks": {
          "type": "array",
          "minItems": 2,
          "maxItems": 6,
          "uniqueItems": true,
          "items": { "type": "string", "minLength": 8, "maxLength": 200 }
        },
        "conditions": {
          "type": "array",
          "minItems": 3,
          "maxItems": 6,
          "uniqueItems": true,
          "items": { "type": "string", "minLength": 8, "maxLength": 220 }
        },
        "kpis_monitor": {
          "type": "array",
          "minItems": 2,
          "maxItems": 12,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["metric", "target", "cadence"],
            "properties": {
              "metric": { "type": "string", "minLength": 1 },
              "target": { "type": "string", "minLength": 1 },
              "cadence": { "type": "string", "enum": ["weekly", "monthly", "quarterly"] }
            }
          }
        },
        "review_horizon_days": { "type": "integer", "enum": [7,14,30,60,90,180] },
        "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
        "source_map": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "STRATEGIST": { "type": "array", "maxItems": 10, "items": { "type": "string" } },
            "FUTURIST": { "type": "array", "maxItems": 10, "items": { "type": "string" } },
            "PSYCHOLOGIST": { "type": "array", "maxItems": 10, "items": { "type": "string" } },
            "ADVISOR": { "type": "array", "maxItems": 10, "items": { "type": "string" } }
          }
        }
      }
    }
  }
}
